//a chain world 


mdp 

    const int failstate = -1; 
    const double p1 = 0.8; 
    const double p2 = 0.4; 
    const int maxstate = 9;
    const double tinyp = 0.05; 
    const doorOpen = 1; 
    const doorClosed = 0; 

module world 

       s:[failstate .. maxstate] init 0; 
       door: [doorClosed .. doorOpen] init doorOpen;


       [v0_1] (s=0) -> p1:(s'=1)+(1-p1):(s'=failstate); 
       [v0_9] (s=0) -> (s'=9);

       [v1_2] (s=1) -> p1:(s'=2)+(1-p1):(s'=failstate); 
       [v1_0] (s=1) -> p1:(s'=0)+(1-p1):(s'=failstate); 
       [v1_9] (s=1) -> (s'=9);

       [v2_3] (s=2) -> p1:(s'=3)+(1-p1):(s'=failstate); 
       [v2_1] (s=2) -> p1:(s'=1)+(1-p1):(s'=failstate); 
       [v2_9] (s=2) -> (s'=9);

       [v3_4] (s=3) -> p1:(s'=4)+(1-(p1)):(s'=failstate); 
       [v3_2] (s=3) -> p2:(s'=2)+(1-p2):(s'=failstate); 
       [v3_9] (s=3) -> (s'=9);

       [v4_5] (s=4) -> p1:(s'=5)+(1-p1):(s'=failstate); 
       [v4_3] (s=4) -> p1:(s'=3)+(1-p1):(s'=failstate); 
       [v4_9] (s=4) -> (s'=9);
       [v4_10] (s=4) & (door=doorOpen) -> (s'=10); 

       [v5_6] (s=5) -> p2:(s'=6)+(1-p2):(s'=failstate); 
       [v5_4] (s=5) -> p1:(s'=4)+(1-p1):(s'=failstate); 
       [v5_9] (s=5) -> (s'=9);

       [v6_5] (s=6) -> p2:(s'=5)+(1-p2):(s'=failstate); 
       [v6_7] (s=6) -> (s'=7); 
       [v6_9] (s=6) -> (s'=9);

       [v7_8] (s=7) -> p1:(s'=8)+(1-p1):(s'=failstate); 
       [v7_6] (s=7) -> (s'=6); 
       [v7_9] (s=7) -> (s'=9);

       [v8_9] (s=8) -> (s'=9);
//       [v8_7] (s=8) -> p1:(s'=7)+(1-p1):(s'=failstate); 

       [v9_0] (s=9) -> (s'=0);
       [v9_1] (s=9) -> (s'=1);
       [v9_2] (s=9) -> (s'=2);
       [v9_3] (s=9) -> (s'=3);
       [v9_4] (s=9) -> (s'=4);
       [v9_5] (s=9) -> (s'=5);
       [v9_6] (s=9) -> (s'=6);
       [v9_7] (s=9) -> (s'=7);       
       [v9_8] (s=9) -> (s'=8);

       [v10_4] (s=10) & (door=doorOpen) -> (s'=4); 

       [failed] (s=failstate) -> (s'=failstate);

endmodule


label "v0" = s=0; 
label "v1" = s=1; 
label "v2" = s=2; 
label "v3" = s=3; 
label "v4" = s=4; 
label "v5" = s=5; 
label "v6" = s=6;
label "v7" = s=7; 
label "v8" = s=8;
label "v9" = s=9;  
label "v10" = s=10;  

label "fail" = s=failstate;  

rewards "time"


       [v0_1] (s=0) :1.0;
       [v0_9] (s=0) :1.0;

       [v1_2] (s=1) :1.0;
       [v1_0] (s=1) :1.0;
       [v1_9] (s=1) :1.0;

       [v2_3] (s=2) :1.0;
       [v2_1] (s=2) :1.0;
       [v2_9] (s=2) :1.0;

       [v3_4] (s=3) :1.0;
       [v3_2] (s=3) :1.0;
       [v3_9] (s=3) :1.0;

       [v4_5] (s=4) :1.0;
       [v4_3] (s=4) :1.0;
       [v4_9] (s=4) :1.0;

       [v5_6] (s=5) :1.0;
       [v5_4] (s=5) :1.0;
       [v5_9] (s=5) :1.0;

       [v6_5] (s=6) :1.0;
       [v6_7] (s=6) :1.0;
       [v6_9] (s=6) :1.0;

       [v7_8] (s=7) :1.0;
       [v7_6] (s=7) :1.0;
       [v7_9] (s=7) :1.0;

       [v8_9] (s=8) :1.0;

       [v9_0] (s=9) :1.0;
       [v9_1] (s=9) :1.0;
       [v9_2] (s=9) :1.0;
       [v9_3] (s=9) :1.0;
       [v9_4] (s=9) :1.0;
       [v9_5] (s=9) :1.0;
       [v9_6] (s=9) :1.0;
       [v9_7] (s=9) :1.0;
       [v9_8] (s=9) :1.0;

       [failed] (s=failstate) :1.0;

endrewards